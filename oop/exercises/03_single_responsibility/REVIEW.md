# レッスン03: 責務の分離 - レビュー

## 学習日
2025-11-29

## 学習した概念

- **単一責任の原則（SRP）**: 1つのクラスは1つの責務だけを持つべき
- **責務の分け方**: 「データの管理」と「出力形式」は別の責務
- **変更の理由で考える**: 日報の項目が変わるタイミングと、出力形式が増えるタイミングは別
- **前回の学びの応用**: カプセル化（`attr_reader`の選択）

## 質疑応答のポイント

### Q: 「日報のデータが変わる」ことと「出力形式が増える」ことは同じタイミングで起きる？

**回答**: 同じタイミングで起きる可能性はある

**補足**: 可能性はあるが、通常は別々の理由・タイミングで発生する。だから別のクラスに分ける。

→ この点は実務経験を積むと実感が湧いてくる部分。今は「そういう考え方がある」と理解できていればOK。

### Q: `attr_accessor` を選んだ理由は？

**回答**: 今回の要件に変更はないので必要ない（`attr_reader`で良い）

→ 02の学びが定着している。自分で気づけたのが良い。

## 良かった点

1. **責務の分離ができた** - DailyReport = データ、Formatter = 出力、と明確に分けられた
2. **02の学びが定着** - `attr_accessor` vs `attr_reader` の判断を自分でできた
3. **ヒアドキュメントの活用** - 複数行の文字列をきれいに書けている
4. **素直にミスを認めた** - マークダウンの `===` の誤りをすぐに認めて修正

## 次に深掘りすべきこと

- **実務での責務分離の判断**: どこまで分けるべきか、分けすぎると何が起きるか
- **依存の方向**: FormatterがDailyReportを知っているが、逆は？この方向性の意味
- **インターフェースの統一**: TextFormatterとMarkdownFormatterが同じ`format`メソッドを持っている意味（→ 06のポリモーフィズムで扱う）

## 総合評価

責務の分離の基本 - 「データの管理」と「出力形式」を別クラスにする - を正しく実装できた。

「同じタイミングで起きる可能性がある」という回答は、厳密には間違いではない。ただ、設計判断としては「通常は別々に変更される」ことを想定して分離する。この感覚は実務で経験を積むと自然と身につく。

前回までの学び（カプセル化）が定着しているのも良い。着実に成長している。
