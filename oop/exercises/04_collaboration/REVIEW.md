# レッスン04: オブジェクト間の協調 - レビュー

## 学習日
2025-11-29

## 学習した概念

- **オブジェクト間のコラボレーション**: 複数のオブジェクトが連携して1つのタスクを達成する
- **メッセージパッシング**: `item.price` は「itemに『価格を教えて』と聞いている」と捉える
- **必要最小限の依存**: オブジェクトは他のオブジェクトのことを知りすぎない方がいい
- **依存の方向**: CartはProductを知っているが、ProductはCartを知らない（一方向の依存）

## 質疑応答のポイント

### Q: CartはProductの何を知っている必要がある？

**回答**: 価格だけでいい。カートの責務は個数と合計金額を出すことであるため。

→ 実装前に正しく判断できた。

### Q: `total_price` の処理を説明して

**回答**: mapでitemsの金額だけ取り出した配列を作成し、その後合計している。

→ 正確に理解できている。

### Q: CartはProductに「名前を教えて」とは聞いていない。なぜ？

**回答**: カートの責務から外れてしまうから。カートがプロダクトに依存しすぎる（知りすぎてしまう）と変更に弱くなるから。

→ 「責務」と「依存」の両面から正しく説明できた。03の学びが活きている。

## 良かった点

1. **実装前の設計判断** - 「priceだけ知ればいい」と正しく判断してから実装に入った
2. **責務と依存の理解** - 03で学んだ「責務の分離」と今回の「必要最小限の依存」を結びつけて理解できた
3. **シンプルな実装** - `map` + `sum` を使った読みやすいコード
4. **attr_readerの選択** - Product, Cart両方で適切にattr_readerを使用

## 次に深掘りすべきこと

- **依存性の注入（DI）**: オブジェクトの依存関係を外部から渡すパターン
- **インターフェースへの依存**: 具体的なクラスではなく「振る舞い」に依存する考え方（→ 06のポリモーフィズムで扱う）
- **双方向の依存を避ける理由**: なぜProductがCartを知らない方がいいのか

## 総合評価

オブジェクト間の協調と「必要最小限の依存」を正しく理解できた。

特に印象的だったのは、「なぜnameを聞かないか」の質問に対して「責務から外れる」「知りすぎると変更に弱くなる」と2つの観点から説明できたこと。これは03の学びがしっかり定着している証拠。

4つのレッスンを通じて、オブジェクト指向の基本的な考え方が身についてきている。
