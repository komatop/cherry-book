# レッスン05: 継承 vs コンポジション - レビュー

## 学習日
2025-11-29

## 学習した概念

- **コンポジション（委譲）**: オブジェクトが他のオブジェクトを「持ち」、処理を任せる
- **継承の問題点**: 親クラスと子クラスが密結合になり、変更に弱くなる
- **「継承より委譲を好め」**: 新しい機能を追加するとき、継承より柔軟
- **is-a vs has-a**: 「〜である」より「〜を持っている」の方が柔軟なことが多い

## 質疑応答のポイント

### Q: 新しいエンジン（水素エンジン）を追加したい場合、AとBどちらが楽？

**回答**: Aだと新しい車を作る必要があるが、Bは新しいエンジンを作るだけで大丈夫。

→ コンポジションの利点を正しく理解。

### Q: `@engine.start` でCarはengineに何を聞いている？

**回答**: 「君のエンジンは何？」と聞いている。継承で作った場合、車がエンジンの情報を知りすぎてしまう。

**補足**: より正確には「起動して、結果を教えて」というメッセージ。Carは「どう起動するか」を知らず、Engineに任せている。

### Q: 継承で作った場合の問題点は？

**回答**: Car自身に変更があった場合、全ての子クラスに問題が発生し、変更に弱くなる。

→ 「継承は密結合を生む」という本質を理解できている。

## 良かった点

1. **コンポジションの利点を即座に理解** - 「新しいエンジンを作るだけ」と正しく答えた
2. **継承の問題点を自分の言葉で説明** - 「変更に弱くなる」「知りすぎてしまう」
3. **シンプルな実装** - Carクラスが10行程度で、委譲がきれいに書けている
4. **前回までの学びを応用** - メッセージパッシング、責務の分離の考え方を適用

## 次に深掘りすべきこと

- **いつ継承を使うべきか**: 継承が適切なケース（本当のis-a関係）
- **ダックタイピング**: Rubyでは「同じメソッドを持っていれば同じように扱える」（→ 06のポリモーフィズムで扱う）
- **依存性の注入（DI）**: コンストラクタでオブジェクトを渡すパターンの名前

## 総合評価

「継承より委譲を好め」の原則を正しく理解し、実装できた。

特に継承の問題点を「変更に弱くなる」「知りすぎてしまう」と自分の言葉で説明できたのが良い。これは単に「コンポジションの方が良い」と暗記するのではなく、**なぜ**そうなのかを理解している証拠。

残り1つ（ポリモーフィズム）で、このコースの基礎編が完了する。
