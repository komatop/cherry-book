# レッスン02: 認証と認可の違い - レビュー

## 学習日
2025-12-02

## 学習した概念
- 認証（Authentication）: 「あなたは誰か」を確認
- 認可（Authorization）: 「あなたは何ができるか」を確認
- 401 Unauthorized vs 403 Forbidden の違い
- OAuth 2.0 は認可の仕組み
- OIDC（OpenID Connect）は OAuth に認証機能を追加した拡張
- CSRFトークンは認証でも認可でもなく「リクエストの正当性」を確認する仕組み

## 質疑応答のポイント

### Q1. 分類問題
- パスワードリセット → 認証 ✓
- 管理者のみ削除可能 → 認可 ✓
- APIキーの発行 → 認可と回答 → 実際は認証の手段を作る行為（スコープ設定があれば認可も関わる）
- 自分の投稿のみ編集可能 → 認可 ✓
- 二要素認証 → 認可と回答 → 実際は認証（「誰であるか」の確認を強化）

### Q2. 403エラーの判断
- 正解。403は認可の失敗なのでログインし直しても解決しない

### Q3. OAuth の本質（重要な議論）
- 最初「わからない」と回答
- カレンダーアプリの具体例で説明
- 「OAuth はアプリにリソースへのアクセス権を認可する仕組み」と理解
- OIDCとの関係：「OAuthだけだとユーザーを特定できない、OIDCで特定できる」→ 正しい理解に到達

### Q4. CSRFトークン
- 「認可に近い」と回答
- 実際は認証でも認可でもなく「リクエストの出所が正当か」を確認する仕組み

### OAuth と OIDC の関係（追加の深掘り）
- OAuth 2.0: アクセストークンを発行（リソースへのアクセス権）
- OIDC: アクセストークン + IDトークン（ユーザー情報）
- 「Googleでログイン」は OIDC を使っている

## 良かった点
- 認証と認可の基本的な違いは素早く理解できた
- 403エラーの意味を正しく理解
- OAuth/OIDCの説明に対して「わからない」と正直に言い、質問を続けて理解を深めた
- 最終的に OAuth と OIDC の関係を正しく言語化できた

## 次に深掘りすべきこと
- レッスン05で OAuth 2.0 / OIDC の詳細フローを学ぶ
- IDトークン（JWT）の構造と検証方法
- 認可の実装パターン（RBAC、ABAC など）

## 総合評価
認証と認可の違いを明確に理解できた。特に OAuth が「認可」であり OIDC が「認証を追加」するという関係は、よくある誤解を避けられる重要な理解。403 と 401 の違いも実務で役立つ知識。次のレッスン（セッション認証）への準備ができた。
